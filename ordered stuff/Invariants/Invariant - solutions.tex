%!TEX TS-program = XeLaTeX
\input{../FormatGen.tex}
\input{../FormatProblems.tex}
%\input{../FormatLV.tex}

\fancyhead[C]{{\Large\bf Invariant solutions}\\ \date}

\begin{document}

\noindent 
%\emph{\notes}
\filbreak
%1
\begin{problem}
\textit{[Blackboard game - \url{http://problems.ru/view_problem_details_new.php?id=60630}]}

\textbf{Invariant value:} the result of multiplication of all numbers on the blackboard does not change with any valid move. 

Since initial result of multiplication was $-1$, the last number on the blackboard will be $-1$
\end{problem}
%

%2
\begin{problem}
\textit{[Coin game \url{http://problems.ru/view_problem_details_new.php?id=30767}]}

Since the machine takes one coin and gives out $5$, the number of coins Luize has changes in increments of $4$.

\textbf{Invariant value} in this case is number of coins modulo $4$ - throughout the process, amount of counts divided by $4$ always gives the same reminder.

Since initia amount is congruent $1$ modulo $4$, but required end state $2018$ is congruent $2$ modulo $4$, then it is clearly unreachable.

 
\end{problem}
%

%3
\begin{problem}
\textit{[Knight chess game - \url{http://problems.ru/view_problem_details_new.php?id=102984}]}

No it is not.

Notice, that a knight always moves from white to black and from black to white fields.

\textbf{Invariant value} - after each odd numbered move, knight will be on a white field, and after each even-numbered move, it will be on the black field.

There are $64$ fields on a chess board, but since the knight is already on one of the fields, it should make $63$ moves to have visited all of them once. $63$ is an odd number, so it will land on a white field, but $h8$ is a black field, so it is impossible.
\end{problem}
%
%4
\begin{problem}
\textit{[Stones game]}

In each move we are decreasing the total amount of stones on the table by $1$ and increasing the number of stone piles by $1$. Therefore...

\textbf{Invariant value} is a sum of stones and piles. 
Then the contradiction is easy to see, for example, as $3\times n + n = 4n$ stones at the end state means that starting state should be $0$ mod $4$
\end{problem}
%

%5
\begin{problem}
\textit{[Circle game - \url{http://problems.ru/view_problem_details_new.php?id=88309}]}

If you color the numbers in two colors - $A$ and $B$, the coloring is uninterrupted, meaning that any two neighboring numbers will contain one of each color.

\textbf{Invariant value} in this case is un/equality of sums of numbers in each color. 

Since we are always adding $1$ to two numbers, one of each color, if we start out out with unequal sums, then they will stay unequal no matter what moves we make. However the required end position has equal sums, so it is unreachable.
\end{problem}
%




%6
\begin{problem}
\textit{[PAMO2018PL6]}

\textbf{Answer:} all $n=3k+1$ and $n=3k+2$

\textbf{Proof that it works for $n=3k+1$ and $n=3k+2$}

An algorithm how to do it in following steps:
\begin{enumerate}
\item One move takes us from $(1,1,\dots,1,0,1,1,\dots)$ to $(1,1,\dots,0,1,0,1,\dots,1)$  
\item One move allow us to increase string of $0$'s like this: $(\underbrace{0,\dots,0,0}_m,\overbrace{1,0,1}^\text{move},1,1,\dots)  \rightarrow 
(\lefteqn{\underbrace{\phantom{0,\dots,0,0,0}}_{m+1}}0,\dots,0,0,\overbrace{0,1,0},1,1,\dots) $  
\item Using two first rules (first - once, second - $3k$ times), we can get to $(0,\dots,0,1,0,\dots,0)$. For $n=3k+1$ goto last step.
\item In case of $n=3k+2$ we apply move once like this $(0,\dots,0,0,\overbrace{1,0,0}^\text{move},0,0,\dots)  \rightarrow (0,\dots,0,0,\overbrace{0,1,1},0,0,\dots)$
\item At this moment we have left with a cluster of one or two $1$'s and a string of $3k$ zeros, which we can convert to all $1$ with $k$ moves: $(\dots,\overbrace{0,0,0},\dots) \rightarrow (\dots,\overbrace{1,1,1},\dots)$ 

\textbf{Proof that it can not be done for $3k$}

We color the numbers in three colors - $A$, $B$ and $C$ cyclically. Since $n=3k$ coloring cycle is uninterrupted.

Notice that any move swaps exactly one number of each color. 

\textbf{Invariant value:} Equality of parity of sums of numbers in each color. I.e. if the parity sum of all $A$ numbers was the same/opposite as those of color $B$, it will stay the same/opposite during any valid move(s). 

Now simply note that in beginning position parity of one color is different from other two, but required end configuration has equal parities in all colors, so it is impossible to reach it.
 
\end{enumerate}
\end{problem}
%

%7
\begin{problem}
\textit{[Golden cards - IMO2007 SLC1]}

\begin{enumerate}
\item We interpret a card showing black as the digit $0$ and a card showing gold as the digit $1$. Thus each position of the $2009$ cards, read from left to right, corresponds bijectively to a nonnegative integer written in binary notation of $2009$ digits, where leading zeros are allowed. Each move decreases this integer, so the game must end.
\item We show that there is no winning strategy for the starting player. We label the cards from right to left by $1, \dots , 2009$ and consider the set $S$ of cards with labels $50i, i = 1, 2, \dots , 40$. Let $g_n$ be the number of cards from $S$ showing gold after $n$ moves. Obviously, $g_0 = 40$. Moreover, $|g_n − g_{n+1}| = 1$ as long as the play goes on. Thus, after an odd number of moves, the non- starting player ﬁnds a card from $S$ showing gold and hence can make a move. Consequently, this player always wins. 

\end{enumerate}
\end{problem}
%

%8
\begin{problem}
\textit{[Number pair game - IMO2012 SLC1]}

Note ﬁrst that the allowed operation does not change the maximum $M$ of the initial sequence. Let $a1, a2, \dots , a_n$ be the numbers obtained at some point of the process. Consider the sum
$$S  =  a_1 + 2a_22 + \dots + na_n$$
We claim that $S$ increases by a positive integer amount with every operation. Let the operation replace the pair $(a_i, a_{i+1})$ by a pair $(c, a_i)$, where $a_i > a_{i+1}$ and $c = a_{i+1}+1$ or $c = a_i −1$. Then the new and the old value of $S$ diﬀer by $d = (ic+(i+1)a_i)−(ia_i +(i+1)a_{i+1}) = a_i −a_{i+1}+i(c−a_{i+1})$. The integer $d$ is positive since $a_i − a_{i+1} ≥ 1$ and $c − a_{i+1} \ge 0$.

On the other hand $S \le (1 + 2 + \dots + n)M$ as $a_i \le M$ for all $i = 1, \dots , n$. Since $S$ increases by at least $1$ at each step and never exceeds the constant $(1 + 2 + \dots + n)M$ , the process stops after a ﬁnite number of iterations.
\end{problem}
%

\end{document}
